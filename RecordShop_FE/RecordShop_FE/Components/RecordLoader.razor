@using RecordShop

@if (Album is null)
{
    <Loading />
}
else if (StatusCode == 400)
{
    <_400 />
}
else if (StatusCode == 404)
{
    <_404 />
}
else
{
    if (PageContext == Page.EditRecord)
    {
        <RecordEditorForm Album="Album" />
    }
    else 
    {
        <RecordDetails Album="Album" StatusCode="StatusCode" />
    }
}

@code {
    HttpManager http = new HttpManager();

    private Album? Album { get; set; }

    public int StatusCode { get; set; }

    [Parameter]
    public Page PageContext { get; set; }

    [Parameter]
    public int Id { get; set; }

    protected override async Task OnInitializedAsync()
    {
        var (response, album) = await http.GetAlbumByIdWithResponse(Id);
        Album = album;
        StatusCode = (int)response.StatusCode;
    }
}
