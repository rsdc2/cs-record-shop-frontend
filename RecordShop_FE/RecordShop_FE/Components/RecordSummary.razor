@using RecordShop
@inject NavigationManager navigationManager

<td class="px-2 mx-2"><span>@Album.Artist</span></td>
<td class ="px-2 mx-2"><span>@Album.Title</span></td>
<td class="px-2 mx-2">
    <Button ButtonText="❌" T="int" Obj="Album.Id" OnClick="DeleteRecord" />
    <Button ButtonText="🔧" T="bool" Obj="false" OnClick="EditRecord" />
    <Button ButtonText="🔍" T="Album" Obj="Album" OnClick="ShowRecordPage" />
</td>
<td><span>
    @(StatusCode switch {
        200 => "🆗",
        204 => "✅",
        _ => "❌"
    }) (@StatusCode)
    </span>
</td>


@code {

    [Parameter] 
    public Album Album { get; set; }

    [Parameter] 
    public int StatusCode { get; set; }

    [Parameter] 
    public EventCallback<bool> OnEditRecord { get; set; }

    [Parameter]
    public EventCallback<int> OnDeleteRecord { get; set; }

    public void DeleteRecord(int recordId)
    {
        OnDeleteRecord.InvokeAsync(recordId);
        navigationManager.NavigateTo(navigationManager.BaseUri + $"records");
    }

    public void EditRecord(bool edit) {
        OnEditRecord.InvokeAsync(edit);
    }

    public void ShowRecordPage(Album album) {
        navigationManager.NavigateTo(navigationManager.BaseUri + $"records/{album.Id}");
    }
}
